<div class="song-profile-container" [class.embedded]="isEmbedded">
    <div class="controls-container" *ngIf="!isEmbedded">
        <!-- Account Actions -->
        <div class="controls-section">
            <h3>{{ 'songProfile.title' | translate }}</h3>
            <div class="controls-buttons">
                <button type="button" (click)="loadBillingInfo()" [disabled]="isLoading" class="refresh-button">
                    <i class="fas fa-refresh"></i> {{ 'songProfile.actions.refresh' | translate }}
                </button>
            </div>
        </div>
    </div>

    <div class="account-content">
        <!-- Loading State -->
        <div class="loading-state" *ngIf="isLoading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>{{ 'songProfile.loading' | translate }}</p>
        </div>

        <!-- Account Information -->
        <div class="account-info-section" *ngIf="!isLoading">
            <div class="account-result-section">
                <div *ngIf="billingInfo" class="account-info">
                    <h2 *ngIf="!isEmbedded">{{ 'songProfile.account.title' | translate }}</h2>

                    <!-- Avatar Section -->
                    <div class="avatar-section">
                        <div class="avatar">
                            <i class="fas fa-music"></i>
                        </div>
                        <div class="account-details">
                            <h3>{{ 'songProfile.account.murekaAccount' | translate }}</h3>
                            <p class="account-id">{{ billingInfo.account_info.account_id || 'N/A' }}</p>
                        </div>
                    </div>

                    <!-- Account Information -->
                    <div class="account-details-info">
                        <div class="info-row">
                          <span class="label">
                              <i class="fas fa-wallet"></i>
                              {{ 'songProfile.account.currentBalance' | translate }}:
                          </span>
                            <span class="value balance-amount">${{ formatCurrency(billingInfo.account_info.balance || 0) }}</span>
                        </div>
                        <div class="info-row">
                          <span class="label">
                              <i class="fas fa-credit-card"></i>
                              {{ 'songProfile.account.totalSpending' | translate }}:
                          </span>
                            <span class="value spending-amount">${{ formatCurrency(billingInfo.account_info.total_spending || 0) }}</span>
                        </div>
                        <div class="info-row">
                          <span class="label">
                              <i class="fas fa-plus-circle"></i>
                              {{ 'songProfile.account.totalRecharge' | translate }}:
                          </span>
                            <span class="value recharge-amount">${{ formatCurrency(billingInfo.account_info.total_recharge || 0) }}</span>
                        </div>
                        <div class="info-row">
                          <span class="label">
                              <i class="fas fa-layer-group"></i>
                              {{ 'songProfile.account.requestLimit' | translate }}:
                          </span>
                            <span class="value account-value">{{ billingInfo.account_info.concurrent_request_limit || 'N/A' }} {{ 'songProfile.account.concurrentRequests' | translate }}</span>
                        </div>
                    </div>

                </div>

                <div *ngIf="!billingInfo" class="no-account">
                    <div class="placeholder-content">
                        <div class="placeholder-icon">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <h3>{{ 'songProfile.empty.title' | translate }}</h3>
                        <p>{{ 'songProfile.empty.description' | translate }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
